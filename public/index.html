<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en">
  <head>
    <title>Mana</title>
    <script type="text/javascript"  src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
  </head>

  <body>
    <h1>Try the console!</h1>


    <form id="test-form" onsubmit="sendCommand(); return false;">
      <input type="text" id='msg' name="msg" >
      <input type="submit" value="Go!" id="submit"/>
    </form>

<script type="text/javascript">
  var ws;
  
  function initConnection() {
  // Connect to Web Socket.
  // Change host/port here to your own Web Socket server.
  ws = new WebSocket("ws://localhost:3333/connect");

  // Set event handlers.
  ws.onopen = function() {
    alert('Opened');
  };
  
  ws.onmessage = function(e) {
    alert(e.data)
  };
  
  ws.onclose = function() {
   alert('Closed');
  };	
  }
  
  $(document).ready(function() {
     initConnection();
     $("#msg").focus();
  });
  
  function sendCommand() {
    ws.send($("#test-form").serialize());
    $("#msg").val("");
    $("#msg").focus();
  }
</script>
</body>
</html>


