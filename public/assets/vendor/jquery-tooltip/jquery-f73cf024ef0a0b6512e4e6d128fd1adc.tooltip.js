/*
 * jQuery Tooltip plugin 1.3
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/
 * http://docs.jquery.com/Plugins/Tooltip
 *
 * Copyright (c) 2006 - 2008 JÃ¶rn Zaefferer
 *
 * $Id: jquery.tooltip.js 5741 2008-06-21 15:22:16Z joern.zaefferer $
 * 
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(a){function h(c){if(b.parent)return;b.parent=a('<div id="'+c.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide(),a.fn.bgiframe&&b.parent.bgiframe(),b.title=a("h3",b.parent),b.body=a("div.body",b.parent),b.url=a("div.url",b.parent)}function i(b){return a.data(b,"tooltip")}function j(b){i(this).delay?e=setTimeout(l,i(this).delay):l(),g=!!i(this).track,a(document.body).bind("mousemove",m),m(b)}function k(){if(a.tooltip.blocked||this==c||!this.tooltipText&&!i(this).bodyHandler)return;c=this,d=this.tooltipText;if(i(this).bodyHandler){b.title.hide();var e=i(this).bodyHandler.call(this);e.nodeType||e.jquery?b.body.empty().append(e):b.body.html(e),b.body.show()}else if(i(this).showBody){var f=d.split(i(this).showBody);b.title.html(f.shift()).show(),b.body.empty();for(var g=0,h;h=f[g];g++)g>0&&b.body.append("<br/>"),b.body.append(h);b.body.hideWhenEmpty()}else b.title.html(d).show(),b.body.hide();i(this).showURL&&a(this).url()?b.url.html(a(this).url().replace("http://","")).show():b.url.hide(),b.parent.addClass(i(this).extraClass),i(this).fixPNG&&b.parent.fixPNG(),j.apply(this,arguments)}function l(){e=null,(!f||!a.fn.bgiframe)&&i(c).fade?b.parent.is(":animated")?b.parent.stop().show().fadeTo(i(c).fade,c.tOpacity):b.parent.is(":visible")?b.parent.fadeTo(i(c).fade,c.tOpacity):b.parent.fadeIn(i(c).fade):b.parent.show(),m()}function m(d){if(a.tooltip.blocked)return;if(d&&d.target.tagName=="OPTION")return;!g&&b.parent.is(":visible")&&a(document.body).unbind("mousemove",m);if(c==null){a(document.body).unbind("mousemove",m);return}b.parent.removeClass("viewport-right").removeClass("viewport-bottom");var e=b.parent[0].offsetLeft,f=b.parent[0].offsetTop;if(d){e=d.pageX+i(c).left,f=d.pageY+i(c).top;var h="auto";i(c).positionLeft&&(h=a(window).width()-e,e="auto"),b.parent.css({left:e,right:h,top:f})}var j=n(),k=b.parent[0];j.x+j.cx<k.offsetLeft+k.offsetWidth&&(e-=k.offsetWidth+20+i(c).left,b.parent.css({left:e+"px"}).addClass("viewport-right")),j.y+j.cy<k.offsetTop+k.offsetHeight&&(f-=k.offsetHeight+20+i(c).top,b.parent.css({top:f+"px"}).addClass("viewport-bottom"))}function n(){return{x:a(window).scrollLeft(),y:a(window).scrollTop(),cx:a(window).width(),cy:a(window).height()}}function o(d){function h(){b.parent.removeClass(g.extraClass).hide().css("opacity","")}if(a.tooltip.blocked)return;e&&clearTimeout(e),c=null;var g=i(this);(!f||!a.fn.bgiframe)&&g.fade?b.parent.is(":animated")?b.parent.stop().fadeTo(g.fade,0,h):b.parent.stop().fadeOut(g.fade,h):h(),i(this).fixPNG&&b.parent.unfixPNG()}var b={},c,d,e,f=a.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),g=!1;a.tooltip={blocked:!1,defaults:{delay:200,fade:!1,showURL:!0,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){a.tooltip.blocked=!a.tooltip.blocked}},a.fn.extend({tooltip:function(c){return c=a.extend({},a.tooltip.defaults,c),h(c),this.each(function(){a.data(this,"tooltip",c),this.tOpacity=b.parent.css("opacity"),this.tooltipText=this.title,a(this).removeAttr("title"),this.alt=""}).mouseover(k).mouseout(o).click(o)},fixPNG:f?function(){return this.each(function(){var b=a(this).css("backgroundImage");b.match(/^url\(["']?(.*\.png)["']?\)$/i)&&(b=RegExp.$1,a(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+b+"')"}).each(function(){var b=a(this).css("position");b!="absolute"&&b!="relative"&&a(this).css("position","relative")}))})}:function(){return this},unfixPNG:f?function(){return this.each(function(){a(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){a(this)[a(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}})})(jQuery)